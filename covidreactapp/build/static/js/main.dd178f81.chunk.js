(this.webpackJsonpHackCOVID19=this.webpackJsonpHackCOVID19||[]).push([[0],{160:function(e,a,t){e.exports=t(368)},165:function(e,a,t){},166:function(e,a,t){},172:function(e,a,t){},368:function(e,a,t){"use strict";t.r(a);var n=t(0),r=t.n(n),l=t(69),s=t.n(l),c=(t(165),t(166),t(12)),o=t(13),i=t(14),m=t(15),u=t(1),d=function(e){Object(m.a)(t,e);var a=Object(i.a)(t);function t(e){var n;Object(c.a)(this,t),(n=a.call(this,e)).toggle=function(){!1===n.state.status?n.setState({status:!0}):n.setState({status:!1})};var l=!1;return l="true"==localStorage.getItem("isLoggedIn"),n.state={status:!1,isLoggedIn:l},console.log(n.state.isLoggedIn),n.JSX=r.a.createElement("div",{className:"navbar-end"},r.a.createElement("div",{className:"navbar-item"},r.a.createElement("div",{className:"buttons"},r.a.createElement(u.b,{to:"/register",className:"button is-primary"},r.a.createElement("strong",null,"Sign up")),r.a.createElement(u.b,{to:"/",className:"button is-light"},"Log in")))),n}return Object(o.a)(t,[{key:"render",value:function(){return r.a.createElement("nav",{className:"navbar",role:"navigation","aria-label":"main navigation"},r.a.createElement("div",{className:"navbar-brand"},r.a.createElement(u.b,{to:"/",className:"navbar-item",style:{fontSize:"40px",fontWeight:200}},"Stay Quaratine"),r.a.createElement("a",{href:"#ToggleNavbar",role:"button",onClick:this.toggle,className:"navbar-burger burger waves-effect","aria-label":"menu","aria-expanded":"false","data-target":"navbarBasicExample"},r.a.createElement("span",{"aria-hidden":"true"}),r.a.createElement("span",{"aria-hidden":"true"}),r.a.createElement("span",{"aria-hidden":"true"}))),r.a.createElement("div",{id:"navbarBasicExample",className:!0===this.state.status?"navbar-menu is-active":"navbar-menu"},r.a.createElement("div",{className:"navbar-start"},r.a.createElement(u.b,{to:"/home",className:"navbar-item",href:"#Home"},"Home"),r.a.createElement("a",{className:"navbar-item",href:"#services"},"Services"),r.a.createElement("div",{className:"navbar-item has-dropdown is-hoverable"},r.a.createElement(u.b,{to:"/",className:"navbar-link",href:"#login"},"Login"),r.a.createElement("div",{className:"navbar-dropdown"},r.a.createElement("a",{className:"navbar-item"},"About"),r.a.createElement("a",{className:"navbar-item"},"Jobs"),r.a.createElement("a",{className:"navbar-item"},"Contact"),r.a.createElement("hr",{className:"navbar-divider"}),r.a.createElement("a",{className:"navbar-item"},"Report an issue")))),this.JSX))}}]),t}(n.Component),g=t(41),p=t(16),v=t.n(p),h=t(24),b=t(29),E=(t(101),function(e){Object(m.a)(t,e);var a=Object(i.a)(t);function t(e){var n;Object(c.a)(this,t),(n=a.call(this,e)).onSubmit=function(){var e=Object(h.a)(v.a.mark((function e(a){var t,r,l,s,c,o;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.preventDefault(),n.setState({isPending:!0}),t=a.target.email.value,r=a.target.password.value,l=a.target.name.value,s=a.target.phone.value,e.next=8,fetch("/api/users/register",{headers:{"Content-Type":"application/json"},method:"POST",body:JSON.stringify({name:l,email:t,phone:s,password:r,loginTime:new Date})});case 8:return c=e.sent,e.next=11,c.json();case 11:o=e.sent,console.log(o),o.isRegistered&&1==o.isRegistered?(localStorage.setItem("isLoggedIn",!0),n.setState({isLoggedIn:!0,isPending:!1})):n.setState({isPending:!1});case 14:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}(),n.onChange=function(e){n.setState(Object(g.a)({},e.target.name,e.target.value))};var r=!1;return"true"==localStorage.getItem("isLoggedIn")?(console.log(r),r=!0):r=!1,n.state={name:"",email:"",phone:"",password:"",isLoggedIn:r,isPending:!1},n}return Object(o.a)(t,[{key:"render",value:function(){return 1==this.state.isLoggedIn?r.a.createElement(b.a,{to:"/home"}):r.a.createElement("span",null,r.a.createElement(d,null),r.a.createElement("form",{onSubmit:this.onSubmit},1==this.state.isPending?r.a.createElement("progress",{class:"progress is-small is-primary",max:"100"},"15%"):"",r.a.createElement("center",{style:{fontSize:"50px",fontWeight:200}},"Register Form"),r.a.createElement("div",{class:"field"},r.a.createElement("label",{class:"label"},"Name"),r.a.createElement("div",{class:"control"},r.a.createElement("input",{id:"name",name:"name",class:"input",type:"text",placeholder:"Enter your Full Name",value:this.state.name,onChange:this.onChange}))),r.a.createElement("div",{class:"field"},r.a.createElement("label",{class:"label"},"Email"),r.a.createElement("div",{class:"control"},r.a.createElement("input",{id:"email",name:"email",class:"input",type:"email",placeholder:"Email ID",value:this.state.email,onChange:this.onChange}))),r.a.createElement("div",{class:"field"},r.a.createElement("label",{class:"label"},"Phone"),r.a.createElement("div",{class:"control"},r.a.createElement("input",{id:"phone",name:"phone",class:"input",type:"number",placeholder:"Enter your Phone",value:this.state.phone,onChange:this.onChange})),r.a.createElement("p",{class:"help"},"An OTP will be sent to given mobile number")),r.a.createElement("div",{class:"field"},r.a.createElement("label",{class:"label"},"Password"),r.a.createElement("div",{class:"control"},r.a.createElement("input",{id:"password",name:"password",class:"input",type:"password",placeholder:"Password",value:this.state.password,onChange:this.onChange}))),r.a.createElement(u.b,{to:"/"},"Already have an Account"),r.a.createElement("div",{class:"control"},r.a.createElement("center",null,r.a.createElement("button",{class:"button is-primary waves-effect"},"Submit")))))}}]),t}(n.Component)),f=function(e){Object(m.a)(t,e);var a=Object(i.a)(t);function t(e){var n;Object(c.a)(this,t),(n=a.call(this,e)).onSubmit=function(){var e=Object(h.a)(v.a.mark((function e(a){var t,r,l,s;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a.preventDefault(),n.setState({isPending:!0}),t=a.target.phone.value,r=a.target.password.value,t&&r){e.next=8;break}return n.setState({isPending:!1}),alert("Phone and Password are Empty"),e.abrupt("return");case 8:return e.next=10,fetch("/api/users/login",{headers:{"Content-Type":"application/json"},method:"POST",body:JSON.stringify({phone:t,password:r,loginTime:new Date})});case 10:return l=e.sent,e.next=13,l.json();case 13:s=e.sent,console.log(s),200==s.statusCode?(localStorage.setItem("userData",JSON.stringify(s.userData)),localStorage.setItem("isLoggedIn",!0),n.setState({loggedIn:!0})):alert("Login Details are Invalid"),n.setState({isPending:!1});case 17:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}(),n.onChange=function(e){n.setState(Object(g.a)({},e.target.name,e.target.value))};var r=!1;return r="true"==localStorage.getItem("isLoggedIn"),n.state={phone:"",password:"",loggedIn:r,isPending:!1},n}return Object(o.a)(t,[{key:"render",value:function(){return!0===this.state.loggedIn?r.a.createElement(b.a,{to:"/home"}):r.a.createElement("span",null,r.a.createElement(d,null),1==this.state.isPending?r.a.createElement("progress",{class:"progress is-small is-primary",max:"100"},"15%"):"",r.a.createElement("form",{style:{padding:"20px"},onSubmit:this.onSubmit},r.a.createElement("small",null,"Please give us Location Access, so that we can give you our best services"),r.a.createElement("center",{style:{fontSize:"50px",fontWeight:200}},"Login Form"),r.a.createElement("div",{class:"field"},r.a.createElement("label",{class:"label"},"Phone"),r.a.createElement("div",{class:"control"},r.a.createElement("input",{id:"phone",name:"phone",class:"input",type:"number",placeholder:"Phone Number",value:this.state.phone,onChange:this.onChange}))),r.a.createElement("div",{class:"field"},r.a.createElement("label",{class:"label"},"Password"),r.a.createElement("div",{class:"control"},r.a.createElement("input",{id:"password",name:"password",class:"input",type:"password",placeholder:"Password",value:this.state.password,onChange:this.onChange}))),r.a.createElement(u.b,{to:"/register"},"Create New Account"),r.a.createElement("div",{class:"control"},r.a.createElement("center",null," ",r.a.createElement("button",{class:"button is-primary waves-effect"},"Submit")))),r.a.createElement("hr",null))}}]),t}(n.Component),w=t(49),y=(t(172),t(43)),S=function(e){Object(m.a)(t,e);var a=Object(i.a)(t);function t(e){var n;Object(c.a)(this,t),n=a.call(this,e);var r=JSON.parse(localStorage.getItem("userData"));return console.log(r),r=[r.location.latitude.value,r.location.longitude.value],console.log(r),n.lat=r[0],n.lng=r[1],n.state={lat:n.lat,lng:n.lng},n}return Object(o.a)(t,[{key:"render",value:function(){return r.a.createElement(y.GoogleMap,{defaultZoom:22,defaultCenter:{lat:this.state.lat,lng:this.state.lng}},r.a.createElement(y.Marker,{position:{lat:this.state.lat,lng:this.state.lng}}),r.a.createElement(y.Circle,{center:{lat:this.state.lat,lng:this.state.lng},radius:6}))}}]),t}(n.Component),N=Object(y.withScriptjs)(Object(y.withGoogleMap)(S)),O=function(e){return r.a.createElement("center",{style:{height:"600px",margin:"30px"}},r.a.createElement(N,{googleMapURL:"https://maps.googleapis.com/maps/api/js?v=3.exp&libraries=geometry,drawing,places&key=AIzaSyBfrIvC8g62dfdbIKzBK_zbkGBlyVmwzM4",loadingElement:r.a.createElement("div",{style:{height:"100%"}}),containerElement:r.a.createElement("div",{style:{height:"100%",width:"100%"}}),mapElement:r.a.createElement("div",{style:{height:"100%"}})}))};var x=function(e){return console.log(e),r.a.createElement("article",{class:"media",style:{boxShadow:"0 0 2px grey",borderRadius:"5px",padding:"10px"}},r.a.createElement("div",{class:"media-left"},r.a.createElement("figure",{class:"image is-64x64 waves-effect",style:{borderRadius:"50%"}},r.a.createElement("img",{src:"https://lh3.googleusercontent.com/-aRoy2dv-oyU/AAAAAAAAAAI/AAAAAAAAAAA/AAKWJJO_i8Uh-v2LEFf7P2RMoQazKlNVKw/photo.jpg?sz=64",alt:"Image"}))),r.a.createElement("div",{class:"media-content"},r.a.createElement("div",{class:"content"},r.a.createElement("p",null,r.a.createElement("strong",{className:"waves-effect"},e.data.name)," ",r.a.createElement("small",{className:"waves-effect"},"@props.data.name")," ",r.a.createElement("small",{className:"waves-effect"},"31m"),r.a.createElement("br",null),r.a.createElement("button",{className:"button is-primary is-small  waves-effect ",style:{margin:"20px",width:"80%"}},"Edit Profile")))))},j=function(e){Object(m.a)(t,e);var a=Object(i.a)(t);function t(e){var n;Object(c.a)(this,t),(n=a.call(this,e)).getUsers=Object(h.a)(v.a.mark((function e(){var a,t;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/api/users/getalloftheusers");case 2:return a=e.sent,e.next=5,a.json();case 5:t=e.sent,n.setState({Leaderboard:t},(function(){}));case 7:case"end":return e.stop()}}),e)}))),n.sendLocationtoServer=Object(h.a)(v.a.mark((function e(){var a,t,r;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=JSON.parse(localStorage.getItem("userData")),e.next=3,fetch("/api/users/update/"+a.phone+"/location",{method:"POST",headers:{"Content-type":"Application/json"},body:JSON.stringify({lat:n.state.latitude,lng:n.state.longitude,time:new Date,accuracy:n.state.accuracy})});case 3:return t=e.sent,e.next=6,t.json();case 6:r=e.sent,localStorage.setItem("userData",JSON.stringify(r));case 8:case"end":return e.stop()}}),e)}))),n.getCurrentLocation=function(){var e=Object(w.a)(n);navigator.geolocation.getCurrentPosition((function(a){e.lan=a.coords.latitude,e.long=a.coords.longitude,e.acc=a.coords.accuracy})),n.setState({latitude:n.lan,longitude:n.long,accuracy:n.acc})},n.toggle=function(){!1===n.state.status?n.setState({status:!0}):n.setState({status:!1})};var r=!0;return r="true"==localStorage.getItem("isLoggedIn"),n.state={status:!1,isLoggedIn:r,latitude:0,longitude:0,accuracy:0,response:!1,endpoint:"http://localhost:5000/",name:"",email:"",phone:0,Leaderboard:[],d:0},console.log(new Date),n.LoggedUserData=JSON.parse(localStorage.getItem("userData")),n.getCurrentLocation=n.getCurrentLocation.bind(Object(w.a)(n)),n.getCurrentLocation(),setTimeout((function(){0==n.state.latitude&&(n.getCurrentLocation(),setInterval((function(){n.getCurrentLocation(),n.sendLocationtoServer()}),500))}),400),n.getUsers(),n}return Object(o.a)(t,[{key:"render",value:function(){return 0==this.state.isLoggedIn?r.a.createElement(b.a,{to:"/"}):r.a.createElement("div",null,r.a.createElement("nav",{className:"navbar is-primary",role:"navigation","aria-label":"main navigation"},r.a.createElement("div",{className:"navbar-brand"},r.a.createElement("a",{className:"navbar-item waves-effect",href:"/",style:{fontSize:"40px",fontWeight:200,position:"relative",width:"80%"}},"Stay Quaratine"),r.a.createElement("a",{href:"#ToggleNavbar",role:"button",onClick:this.toggle,className:"navbar-burger burger","aria-label":"menu","aria-expanded":"false","data-target":"navbarBasicExample"},r.a.createElement("span",{"aria-hidden":"true"}),r.a.createElement("span",{"aria-hidden":"true"}),r.a.createElement("span",{"aria-hidden":"true"}))),r.a.createElement("div",{id:"navbarBasicExample",className:!0===this.state.status?"navbar-menu is-active":"navbar-menu"},r.a.createElement("div",{className:"navbar-start"},r.a.createElement(u.b,{to:"/home",className:"navbar-item",href:"#Home"},"Home"),r.a.createElement("a",{className:"navbar-item",href:"#services"},"Services"),r.a.createElement("div",{className:"navbar-item has-dropdown is-hoverable"},r.a.createElement(u.b,{to:"/home/settings",className:"navbar-link",href:"#login"},"Settings"),r.a.createElement("div",{className:"navbar-dropdown"},r.a.createElement("a",{className:"navbar-item"},"Account Settings"),r.a.createElement("a",{className:"navbar-item"},"Location Services"),r.a.createElement("a",{className:"navbar-item"},"Privacy"),r.a.createElement("hr",{className:"navbar-divider"}),r.a.createElement("a",{className:"navbar-item"},"Contact Us"),r.a.createElement("a",{className:"navbar-item"},"Report an issue")))),r.a.createElement("div",{className:"navbar-end"},r.a.createElement("div",{className:"navbar-item"},r.a.createElement("div",{className:"buttons"},r.a.createElement(u.b,{to:"logout",className:"button is-danger"},"Logout")))))),r.a.createElement("br",null),r.a.createElement("div",{class:"tabs"},r.a.createElement("ul",null,r.a.createElement("li",{class:"is-active"},r.a.createElement("a",null,"Home")),r.a.createElement("li",null,r.a.createElement(u.b,{to:"/home/shops"},"Local Shops")),r.a.createElement("li",null,r.a.createElement(u.b,null,"Posts")),r.a.createElement("li",null,r.a.createElement(u.b,null,"Profile")))),r.a.createElement("center",{style:Object(g.a)({margin:"2px",boxShadow:"0 0 2px grey",padding:"20px"},"margin","20px")},r.a.createElement("button",{className:"button is-danger waves-effect",onClick:this.getCurrentLocation},"get Location"),r.a.createElement("table",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Latitude"),r.a.createElement("th",null,"Longitude"),r.a.createElement("th",null,"Accuracy")),r.a.createElement("tr",null,r.a.createElement("td",null,this.state.latitude),r.a.createElement("td",null,this.state.longitude),r.a.createElement("td",null,this.state.accuracy)))),r.a.createElement(x,{data:this.LoggedUserData}),r.a.createElement("article",{class:"panel is-primary"},r.a.createElement("p",{class:"panel-heading waves-effect",style:{position:"relative",width:"100%"}},"Leaderboard"),r.a.createElement("div",{class:"panel-block"},r.a.createElement("p",{class:"control has-icons-left"},r.a.createElement("input",{class:"input is-primary",type:"text",placeholder:"Search"}),r.a.createElement("span",{class:"icon is-left"},r.a.createElement("i",{class:"fas fa-search","aria-hidden":"true"})))),this.state.Leaderboard.map((function(e){return r.a.createElement("a",{class:"panel-block is-active waves-effect",style:{width:"100%",display:"inline-flex"}},r.a.createElement("span",{class:"panel-icon"},r.a.createElement("i",{class:"fas fa-user-circle","aria-hidden":"true"})),r.a.createElement("span",null,e.name))}))),r.a.createElement(O,null))}}]),t}(n.Component),C=function(e){Object(m.a)(t,e);var a=Object(i.a)(t);function t(e){var n;return Object(c.a)(this,t),(n=a.call(this,e)).get=Object(h.a)(v.a.mark((function e(){var a,t;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://www.googleapis.com/geolocation/v1/geolocate?key=AIzaSyBfrIvC8g62dfdbIKzBK_zbkGBlyVmwzM4",{method:"POST"});case 2:return a=e.sent,e.next=5,a.json();case 5:t=e.sent,console.log(t),alert(JSON.parse(t)),n.setState({m:"GIT IT"});case 9:case"end":return e.stop()}}),e)}))),localStorage.setItem("isLoggedIn",!1),localStorage.setItem("userData",""),n.state={m:""},n.get(),n}return Object(o.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(d,null),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("center",null,r.a.createElement(u.b,{to:"/",className:"button"},"Go To Login Page")),r.a.createElement("br",null),this.state.m)}}]),t}(n.Component);n.Component;var I=function(){return r.a.createElement("span",null,r.a.createElement(u.a,null,r.a.createElement(b.d,null,r.a.createElement(b.b,{path:"/",exact:!0,component:f}),r.a.createElement(b.b,{path:"/register",component:E}),r.a.createElement(b.b,{path:"/home",exact:!0,component:j}),r.a.createElement(b.b,{path:"/logout",component:C}))))},L=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function A(e,a){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var t=e.installing;null!=t&&(t.onstatechange=function(){"installed"===t.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),a&&a.onUpdate&&a.onUpdate(e)):(console.log("Content is cached for offline use."),a&&a.onSuccess&&a.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}s.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(I,null)),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var a="".concat("","/service-worker.js");L?(!function(e,a){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(t){var n=t.headers.get("content-type");404===t.status||null!=n&&-1===n.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):A(e,a)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(a,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")}))):A(a,e)}))}}()}},[[160,1,2]]]);
//# sourceMappingURL=main.dd178f81.chunk.js.map